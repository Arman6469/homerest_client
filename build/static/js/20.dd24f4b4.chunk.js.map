{"version":3,"sources":["pages/Shop/ProductSinglePage/ProductSinglePage.js"],"names":["ProductSinglePage","cartItemsID","setCartItemsID","setItem","useLocalStorage","useState","loading","setLoading","count","setCount","currentSlide","setCurrentSlide","product","setProduct","productId","useParams","id","useEffect","fetchSingle","swap","useCallback","num","images","length","aImg","decrementCount","incrementCount","a","globalAPI","get","data","console","log","className","src","alt","width","onClick","icon","faChevronLeft","faChevronRight","map","image","index","key","title","sale","price","newprice","description","tabIndex","copy","undefined","newCartItemsID","addToCart","_id","renderPage"],"mappings":"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","file":"static/js/20.dd24f4b4.chunk.js","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport \"./singlepage.scss\";\nimport { useParams } from \"react-router-dom\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faChevronLeft,\n  faChevronRight,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { useLocalStorage } from \"../../../hooks/useLocalStorage\";\nimport Loading from \"../../../components/Loading/Loading\";\nimport globalAPI from \"../../../api/globalAPI\";\n\nexport default function ProductSinglePage({ cartItemsID, setCartItemsID }) {\n  const { setItem } = useLocalStorage();\n  const [loading, setLoading] = useState(true);\n  const [count, setCount] = useState(1);\n  const [currentSlide, setCurrentSlide] = useState(0);\n  const [product, setProduct] = useState({});\n\n  const productId = useParams().id;\n  \n\n  useEffect(() => {\n    fetchSingle(productId);\n  }, [productId]);\n\n  const swap = useCallback(\n    (num) => {\n      product.images?.length &&\n        setCurrentSlide(\n          (aImg) =>\n            (aImg + num + product.images?.length) % product.images?.length\n        );\n    },\n    [product.images]\n  );\n\n  const decrementCount = () => {\n    if (count > 1) {\n      setCount(count - 1);\n    }\n  };\n  const incrementCount = () => {\n    setCount(count + 1);\n  };\n\n  const addToCart = (id, count) => {\n    const copy = cartItemsID[id] ? cartItemsID[id] : undefined;\n    if (copy === undefined) {\n      const newCartItemsID = { ...cartItemsID, [id]: count };\n      setCartItemsID(newCartItemsID);\n      setItem(\"cartItems\", newCartItemsID);\n    } else {\n      const newCartItemsID = { ...cartItemsID, [id]: count + copy };\n      setCartItemsID(newCartItemsID);\n      setItem(\"cartItems\", newCartItemsID);\n    }\n  };\n\n  const fetchSingle = async (id) => {\n    try {\n      const data = await globalAPI.get(`/products/product/${id}`);\n\n      setProduct(data.data);\n      setLoading(false);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const renderPage = () => {\n    if (loading) return <Loading />;\n    return (\n      <div className=\"single_page\">\n        <div className=\"single_page_main_image\">\n          <div className=\"current_slide\">\n            <img\n              src={\n                product.images?.length > 0 ? product.images[currentSlide] : null\n              }\n              alt=\"main\"\n              width=\"100%\"\n            />\n            <div className=\"slider-button-left\" onClick={() => swap(-1)}>\n              <FontAwesomeIcon icon={faChevronLeft} />{\" \"}\n            </div>\n            <div className=\"slider-button-right\" onClick={() => swap(1)}>\n              <FontAwesomeIcon icon={faChevronRight} />\n            </div>\n          </div>\n\n          <div className=\"single_slider_images\">\n            {product.images?.length > 0\n              ? product.images.map((image, index) => {\n                  return (\n                    <div\n                      className=\"single_slider_image\"\n                      key={index}\n                      onClick={() => setCurrentSlide(index)}\n                    >\n                      <img src={image} alt={index} width=\"100%\" />\n                    </div>\n                  );\n                })\n              : null}\n          </div>\n        </div>\n\n        <div className=\"single_page_description\">\n          <h2 className=\"font-h1 upper font-whitesmoke mt-2\">\n            {product.title}\n          </h2>\n          <h4 className=\"font-medium font-whitesmoke weight-6 mt-5\">Price</h4>\n          <p className=\"font-medium font-whitesmoke weight-7 padding-left1 max-width80\">\n            <span className={product.sale === 0 ? null : \"underline\"}>\n              {product.price}֏\n            </span>\n            <span className=\"margin-left-1\">\n              {product.newprice !== 0 ? product.newprice + \"֏\" : null}\n            </span>\n          </p>\n\n          <h4 className=\"font-medium font-whitesmoke weight-6 mt-5\">\n            Description\n          </h4>\n          <p className=\"font-desc font-whitesmoke padding-left1 max-width80\">\n            {product.description}\n          </p>\n\n          <div className=\"plus_minus_buttons width-100\">\n            <div className=\"shop_count_button\" onClick={decrementCount}>\n              -\n            </div>\n            <div className=\"shop_count\">{count}</div>\n            <div className=\"shop_count_button\" onClick={incrementCount}>\n              +\n            </div>\n\n            <div\n              className=\"ui vertical animated button standart ml-2\"\n              tabIndex=\"0\"\n              onClick={() => addToCart(product._id, count)}\n            >\n              <div className=\"hidden content\">Shop</div>\n              <div className=\"visible content\">\n                <i className=\"shop icon\"></i>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  return renderPage();\n}\n"],"sourceRoot":""}